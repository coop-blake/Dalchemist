<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Dalchemist</title>
 
  <link rel="stylesheet" href="../css/index.css">
</head>
<body>
 
  <div class="image-container">
    <img id="iconImage" class="image pulsating" src="../images/Icon.svg" alt="Background Image">
  </div>
  <div class="content-container">
    <div class="content">
      <h1>Dalchemist</h1>
     <div  id="statusContent">Loading</div> 
    <span style="opacity:0"  id="menuContent"> <a    href="http://localhost:4848/">
      <span class="menuButton">Add Drop</span></a></span> 

    </div>
  </div>
  <script>

    function updateErrorMessage( error){

      if (document.readyState === 'complete' || document.readyState === 'interactive') {


        let statusContent = document.getElementById('statusContent');
        let iconImage = document.getElementById('iconImage');
        
        if (statusContent) {
          let errorMessage = error.replace(/'/g, "\\'").replace(/"/g, '\\"')
          statusContent.innerHTML = `Error Loading! </br>${errorMessage}`;
          statusContent.style.color = 'red';
        }
        if(iconImage){
          iconImage.classList.remove('pulsating');
        }

      } else {
          document.addEventListener('DOMContentLoaded', updateErrorMessage, error);
        }

    }

    function updateStatusMessage( statusMessage){

      if (document.readyState === 'complete' || document.readyState === 'interactive') {
        let statusContent = document.getElementById('statusContent');
       
        if (statusContent) {
          
          statusContent.innerHTML = `${statusMessage.replace(/'/g, "\\'").replace(/"/g, '\\"')}`;
        }
       
      } else {
          document.addEventListener('DOMContentLoaded', updateStatusMessage, statusMessage);
      }
    }


    receiveMessageFromMain((message) => {
     
      console.log(`Received: ${message}`)

      updateStatusMessage(message)
    });

</script>

</body>
</html>
